webpackJsonp([1],{"+LN4":function(t,e){},0:function(t,e){},Lcp1:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]},r=a("VU/8")({name:"App",data:function(){return{}}},i,!1,null,null,null).exports,n=a("8+8L"),o=a("zL8q"),l=a.n(o),c=(a("tvR6"),a("/ocq")),u=a("gRE1"),v=a.n(u),d=a("bOdI"),h=a.n(d),p={name:"Detail",data:function(){var t;return t={movies:[],detail:[],casts:[],countries:[],directors:[],duration:"",genres:[],languages:[],poster:"",pubdate:[],rating:{average:3,rating_people:0,stars:[]},summary:"",title:"",writers:[],rate:3},h()(t,"countries",[]),h()(t,"languages",[]),h()(t,"value1",1),h()(t,"value2",2),h()(t,"value3",3),h()(t,"value4",4),h()(t,"value5",5),t},mounted:function(){this.getJsonInfo()},methods:{getJsonInfo:function(){this.$http.options.emulateJSON=!0,this.$http.get("./static/films.json").then(function(t){var e=this;this.movies=t.data,this.detail=this.movies.filter(function(t){return v()(t._id).join("").toLowerCase().search(e.$route.params.id)>=0})[0],this.totalMovie=this.movies.length,this.init()}).catch(function(t){})},init:function(){this.casts=this.detail.casts,this.countries=this.detail.countries,this.directors=this.detail.directors,this.duration=this.detail.duration,this.genres=this.detail.genres,this.languages=this.detail.languages,this.poster=this.detail.poster,this.pubdate=this.detail.pubdate,this.rating=this.detail.rating,this.summary=this.detail.summary,this.title=this.detail.title,this.writers=this.detail.writers,this.countries=this.detail.countries,this.languages=this.detail.languages,this.rate=parseFloat((parseFloat(this.detail.rating.average)/2).toFixed(1)),""===this.detail.rating.average&&(this.rate=0,this.rating.average="",this.rating.rating_people=0,this.rating.stars=[0,0,0,0,0])},imgError:function(){this.poster=a("Xik7")},imgListError:function(t){t.poster=a("Xik7")},goToDetail:function(t){this.$router.push({name:"movie-detail",params:{id:t._id}})},goToList:function(){this.$router.push({name:"movie-list"})}},computed:{randomRes:function(){var t=this.movies,e=Math.floor(Math.random()*t.length+1)-1;return e>194?t.slice(194,200):t.slice(e,e+6)},getScoreColor:function(){return this.rating.average>7.9?"#FF9900":this.rating.average>4?"#F7BA2A":"#FF9900"}},watch:{$route:function(t,e){this.$router.go(0)}}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-container",[a("el-header",[t._v(t._s(this.detail.title))]),t._v(" "),a("el-main",[a("div",{staticClass:"container"},[a("img",{staticClass:"poster",attrs:{src:t.poster,alt:t.title},on:{error:function(e){return t.imgError()}}}),t._v(" "),a("div",{staticStyle:{flex:"1"}},[a("div",{staticClass:"casts"},[a("div",[t._v("\n                            导演: "),t._l(t.directors,function(e,s){return a("span",{key:s+100,staticClass:"director"},[t._v(t._s(e.name))])})],2),t._v(" "),a("div",[t._v("\n                            编剧: "),t._l(t.writers,function(e,s){return a("span",{key:s+1e3,staticClass:"cast-name"},[t._v(t._s(e.name))])})],2),t._v(" "),a("div",[t._v("\n                            演员: "),t._l(t.casts,function(e,s){return a("span",{key:s+1e3,staticClass:"cast-name"},[t._v(t._s(e.name))])})],2)]),t._v(" "),a("div",{staticClass:"check"},[t._v("\n                        上映日期: "),t._l(t.pubdate,function(e,s){return a("span",{key:s,staticClass:"date"},[t._v(t._s(e))])}),t._v(" "),a("div",{staticClass:"duration"},[t._v("片长: "+t._s(t.duration)+"min")]),t._v("\n                        类型: "),t._l(t.genres,function(e,s){return a("span",{key:s+10,staticClass:"genre"},[t._v(t._s(e))])}),t._v(" "),a("div",[t._v("制片国家/地区: "),t._l(t.countries,function(e,s){return a("span",{key:s+110,staticClass:"genre"},[t._v(t._s(e))])})],2),t._v(" "),a("div",[t._v("语言: "),t._l(t.languages,function(e,s){return a("span",{key:s+120,staticClass:"genre"},[t._v(t._s(e))])})],2)],2)]),t._v(" "),a("div",[a("div",[a("span",{staticClass:"rating"},[a("el-rate",{attrs:{disabled:"","text-color":"#ff9900",colors:["#99A9BF","#F7BA2A","#FF9900"],"score-template":"{value}"},model:{value:t.rate,callback:function(e){t.rate=e},expression:"rate"}})],1),t._v(" "),a("span",{staticClass:"score",style:{color:t.getScoreColor}},[t._v(t._s(t.rating.average))]),t._v(" "),a("span",{staticClass:"rating-people"},[t._v("("+t._s(t.rating.rating_people)+"人评分)")])]),t._v(" "),a("div",[a("span",{staticClass:"rating"},[a("el-rate",{attrs:{disabled:"","show-text":"",colors:["#99A9BF","#F7BA2A","#FF9900"],"text-color":"#ff9900","score-template":"{value}"},model:{value:t.value5,callback:function(e){t.value5=e},expression:"value5"}})],1),t._v(" "),a("span",{staticClass:"rating-people"},[t._v(t._s(t.rating.stars[0])+"%")])]),t._v(" "),a("div",[a("span",{staticClass:"rating"},[a("el-rate",{attrs:{disabled:"","show-text":"",colors:["#99A9BF","#F7BA2A","#FF9900"],"text-color":"#ff9900","score-template":"{value}"},model:{value:t.value4,callback:function(e){t.value4=e},expression:"value4"}})],1),t._v(" "),a("span",{staticClass:"rating-people"},[t._v(t._s(t.rating.stars[1])+"%")])]),t._v(" "),a("div",[a("span",{staticClass:"rating"},[a("el-rate",{attrs:{disabled:"","show-text":"",colors:["#99A9BF","#F7BA2A","#FF9900"],"text-color":"#F7BA2A","score-template":"{value}"},model:{value:t.value3,callback:function(e){t.value3=e},expression:"value3"}})],1),t._v(" "),a("span",{staticClass:"rating-people"},[t._v(t._s(t.rating.stars[2])+"%")])]),t._v(" "),a("div",[a("span",{staticClass:"rating"},[a("el-rate",{attrs:{disabled:"","show-text":"",colors:["#99A9BF","#F7BA2A","#FF9900"],"text-color":"#99A9BF","score-template":"{value}"},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}})],1),t._v(" "),a("span",{staticClass:"rating-people"},[t._v(t._s(t.rating.stars[3])+"%")])]),t._v(" "),a("div",[a("span",{staticClass:"rating"},[a("el-rate",{attrs:{disabled:"","show-text":"",colors:["#99A9BF","#F7BA2A","#FF9900"],"text-color":"#99A9BF","score-template":"{value}"},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}})],1),t._v(" "),a("span",{staticClass:"rating-people"},[t._v(t._s(t.rating.stars[4])+"%")])])])]),t._v(" "),a("div",{staticClass:"intro"},[a("div",{staticClass:"intro-word"},[t._v("简介")]),a("br"),t._v(" "),a("div",[t._v(t._s(t.summary))])]),t._v(" "),a("div",{staticClass:"other-movie"},[a("div",{staticClass:"command-word"},[a("span",[t._v("推荐")]),t._v(" "),a("span",{staticClass:"back",on:{click:t.goToList}},[t._v("返回列表>>")])]),t._v(" "),t._l(t.randomRes,function(e,s){return a("el-col",{key:s+350,attrs:{span:4}},[a("img",{staticClass:"poster-list",attrs:{src:e.poster,alt:e.title},on:{error:function(a){return t.imgListError(e)},click:function(a){return t.goToDetail(e)}}}),t._v(" "),a("div",{staticClass:"title-list"},[t._v(t._s(e.title))])])})],2)])],1)],1)},staticRenderFns:[]};var g=a("VU/8")(p,_,!1,function(t){a("Lcp1")},"data-v-64571c2e",null).exports,f={name:"MovieCard",props:["detail"],data:function(){return{id:"",casts:[],countries:[],directors:[],duration:"",genres:[],languages:[],poster:"",pubdate:[],rating:{average:3,rating_people:0,stars:[]},summary:"",title:"",writers:[],rate:0}},mounted:function(){this.init()},methods:{init:function(){this.id=this.detail._id,this.casts=this.detail.casts,this.countries=this.detail.countries,this.directors=this.detail.directors,this.duration=this.detail.duration,this.genres=this.detail.genres,this.languages=this.detail.languages,this.poster=this.detail.poster,this.pubdate=this.detail.pubdate,this.rating=this.detail.rating,this.summary=this.detail.summary,this.title=this.detail.title,this.writers=this.detail.writers,this.rate=parseFloat((parseFloat(this.detail.rating.average)/2).toFixed(1)),""===this.detail.rating.average&&(this.rate="暂无评分",this.rating.rating_people=0)},imgError:function(){this.poster=a("Xik7")},goToDetail:function(){this.$router.push({name:"movie-detail",params:{id:this.id}})}},watch:{detail:{handler:function(t,e){this.init()},deep:!0}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{attrs:{"body-style":{display:"flex",flexDirection:"column",padding:0}}},[a("div",{staticClass:"container"},[a("img",{staticClass:"poster",attrs:{src:t.poster,alt:t.title},on:{error:function(e){return t.imgError()},click:t.goToDetail}}),t._v(" "),a("div",{staticClass:"info"},[a("div",{staticClass:"title",on:{click:t.goToDetail}},[t._v(t._s(t.title))]),t._v(" "),a("div",{staticClass:"check"},[t._l(t.pubdate,function(e,s){return a("span",{key:s,staticClass:"date"},[t._v(t._s(e))])}),t._v(" "),a("span",{staticClass:"duration"},[t._v(t._s(t.duration)+"min")]),t._v(" "),t._l(t.genres,function(e,s){return a("span",{key:s+10,staticClass:"genre"},[t._v(t._s(e))])}),t._v(" "),a("el-row",{staticClass:"rating-row"},[a("span",{staticClass:"rating"},[a("el-rate",{attrs:{disabled:"","text-color":"#ff9900","score-template":"{value}"},model:{value:t.rate,callback:function(e){t.rate=e},expression:"rate"}})],1),t._v(" "),a("span",{staticClass:"score"},[t._v(t._s(t.rating.average))]),t._v(" "),a("span",{staticClass:"rating-people"},[t._v("("+t._s(this.rating.rating_people)+"人评分)")])])],2),t._v(" "),a("div",{staticClass:"casts"},[t._l(t.directors,function(e,s){return a("span",{key:s+100,staticClass:"director"},[t._v(t._s(e.name))])}),t._v(" "),t._l(t.casts,function(e,s){return a("span",{key:s+1e3,staticClass:"cast-name"},[t._v(t._s(e.name))])})],2),t._v(" "),a("div",{staticClass:"intro"},[t._v("\n        "+t._s(t.summary)+"\n      ")])])])])},staticRenderFns:[]};var C=a("VU/8")(f,m,!1,function(t){a("qc28")},"data-v-1b17ee7f",null).exports,b=a("lHA8"),F=a.n(b),k={name:"Boarding",props:["movieList"],data:function(){return{genre:"恐怖"}},methods:{selectMovie:function(t){this.$emit("titleSearchChanged",t.title)}},computed:{genres:function(){var t=new F.a;this.movieList.forEach(function(e){e.genres.forEach(function(e){t.add(e)})});var e=[];return t.forEach(function(t){e.push({value:t,label:t})}),e},boardingRes:function(){var t=this,e=this.movieList.filter(function(e){return v()(e.genres).join("____").toLowerCase().search(t.genre.toLowerCase())>=0});return(e=e.sort(w)).slice(0,10)},totalRes:function(){var t=this.movieList.filter(function(t){return v()(t.genres).join("____").toLowerCase().search()>=0});return(t=t.sort(w)).slice(0,10)}}};function w(t,e){return e.rating.average-t.rating.average}var x={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"board"},[a("el-col",{staticClass:"sub-header",attrs:{span:14}},[t._v("排行榜")]),t._v(" "),a("el-col",{staticClass:"genre",attrs:{span:10}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.genre,callback:function(e){t.genre=e},expression:"genre"}},t._l(t.genres,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("div",{staticClass:"boarding-list"},t._l(t.boardingRes,function(e,s){return a("p",{key:s,on:{click:function(a){return t.selectMovie(e)}}},[t._v(t._s(e.title))])}),0),t._v(" "),a("el-col",{staticClass:"sub-header"},[t._v("口碑榜")]),t._v(" "),a("div",{staticClass:"boarding-list"},t._l(t.totalRes,function(e,s){return a("p",{key:s,on:{click:function(a){return t.selectMovie(e)}}},[t._v(t._s(e.title))])}),0)],1)},staticRenderFns:[]};var L={name:"MovieList",components:{MovieCard:C,Boarding:a("VU/8")(k,x,!1,function(t){a("P5SI")},"data-v-352fd2b8",null).exports},data:function(){return{movies:[],currentPage:1,pageSize:10,totalMovie:0,search:"",command:"全文检索",options:[{value:"按名称",label:"按名称"},{value:"按导演",label:"按导演"},{value:"按演员",label:"按演员"},{value:"全文检索",label:"全文检索"}],genre:""}},mounted:function(){this.getJsonInfo()},methods:{getJsonInfo:function(){this.$http.options.emulateJSON=!0,this.$http.get("./static/films.json").then(function(t){this.movies=t.data,this.totalMovie=this.movies.length}).catch(function(t){console.log(t)})},handleCurrentChange:function(t){this.currentPage=t},handleSearch:function(t){var e=this;return this.currentPage=1,"a"===t?this.movies.filter(function(t){return v()(t.title).join("____").toLowerCase().search(e.search.toLowerCase())>=0}).slice((val-1)*this.pageSize,val*this.pageSize):"b"===t?this.movies.filter(function(t){return v()(t.directors).join("____").toLowerCase().search(e.search.toLowerCase())>=0}).slice((val-1)*this.pageSize,val*this.pageSize):void 0},searchTitle:function(t){this.command="按名称",this.search=t}},computed:{res:function(){var t=this;this.search&&(this.currentPage=1);var e=this.currentPage,a=this.movies.filter(function(e){return v()(e).join("____").toLowerCase().search(t.search.toLowerCase())>=0}),s=this.command;if("按名称"===s)return i=(a=this.movies.filter(function(e){return v()(e.title).join("").toLowerCase().search(t.search.toLowerCase())>=0})).slice((e-1)*this.pageSize,e*this.pageSize);if("按导演"===s)return i=(a=this.movies.filter(function(e){var a=[];return e.directors.forEach(function(t){a.push(t.name)}),v()(a).join("____").toLowerCase().search(t.search.toLowerCase())>=0})).slice((e-1)*this.pageSize,e*this.pageSize);if("按演员"===s)return i=(a=this.movies.filter(function(e){var a=[];return e.casts.forEach(function(t){a.push(t.name)}),v()(a).join("____").toLowerCase().search(t.search.toLowerCase())>=0})).slice((e-1)*this.pageSize,e*this.pageSize);var i=a.slice((e-1)*this.pageSize,e*this.pageSize);return console.log(i),i}}},y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-container",[a("el-header",[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入需要检索的内容"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.command,callback:function(e){t.command=e},expression:"command"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-col",{staticClass:"header-text",attrs:{span:10}},[t._v("My Movie List")]),t._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"block"},[a("el-pagination",{attrs:{layout:"prev, pager, next","current-page":t.currentPage,"page-size":t.pageSize,total:t.totalMovie},on:{"current-change":t.handleCurrentChange}})],1)])],1),t._v(" "),a("el-container",[a("el-aside",[a("div",{staticClass:"boarding"},[a("Boarding",{attrs:{movieList:t.movies},on:{titleSearchChanged:function(e){return t.searchTitle(e)}}})],1)]),t._v(" "),a("el-main",t._l(t.res,function(t,e){return a("el-row",{key:e},[a("el-col",{attrs:{span:24}},[a("MovieCard",{attrs:{detail:t}})],1)],1)}),1)],1)],1)],1)},staticRenderFns:[]};var A=[{path:"/movie-list",name:"movie-list",component:a("VU/8")(L,y,!1,function(t){a("+LN4")},null,null).exports},{path:"/movie-detail/:id",name:"movie-detail",component:g},{path:"/",redirect:"movie-list"}];s.default.use(n.a),s.default.use(l.a),s.default.use(c.a);var S=new c.a({routes:A});new s.default({el:"#app",router:S,render:function(t){return t(r)}})},P5SI:function(t,e){},Xik7:function(t,e,a){t.exports=a.p+"static/img/LostSource.41c5a11.png"},qc28:function(t,e){},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.23355a2cc28a9928e9c8.js.map