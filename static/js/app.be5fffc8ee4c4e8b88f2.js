webpackJsonp([1],{"+LN4":function(t,e){},0:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("7+uW"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]},r=s("VU/8")({name:"App",data:function(){return{}}},i,!1,null,null,null).exports,n=s("8+8L"),o=s("zL8q"),l=s.n(o),c=(s("tvR6"),s("/ocq")),u=s("gRE1"),v=s.n(u),d=s("bOdI"),h=s.n(d),p={name:"Detail",data:function(){var t;return t={movies:[],detail:[],casts:[],countries:[],directors:[],duration:"",genres:[],languages:[],poster:"",pubdate:[],rating:{average:3,rating_people:0,stars:[]},summary:"",title:"",writers:[],rate:3},h()(t,"countries",[]),h()(t,"languages",[]),h()(t,"value1",1),h()(t,"value2",2),h()(t,"value3",3),h()(t,"value4",4),h()(t,"value5",5),t},mounted:function(){this.getJsonInfo()},methods:{getJsonInfo:function(){this.$http.options.emulateJSON=!0,this.$http.get("../../static/films.json").then(function(t){var e=this;this.movies=t.data,this.detail=this.movies.filter(function(t){return v()(t._id).join("").toLowerCase().search(e.$route.params.id)>=0})[0],this.totalMovie=this.movies.length,this.init()}).catch(function(t){})},init:function(){this.casts=this.detail.casts,this.countries=this.detail.countries,this.directors=this.detail.directors,this.duration=this.detail.duration,this.genres=this.detail.genres,this.languages=this.detail.languages,this.poster=this.detail.poster,this.pubdate=this.detail.pubdate,this.rating=this.detail.rating,this.summary=this.detail.summary,this.title=this.detail.title,this.writers=this.detail.writers,this.countries=this.detail.countries,this.languages=this.detail.languages,this.rate=parseFloat((parseFloat(this.detail.rating.average)/2).toFixed(1)),""===this.detail.rating.average&&(this.rate="暂无评分",this.rating.rating_people=0,this.rating.stars=[0,0,0,0,0])},imgError:function(){this.poster=s("Xik7")},imgListError:function(t){t.poster=s("Xik7")},goToDetail:function(t){this.$router.push({name:"movie-detail",params:{id:t._id}})},goToList:function(){this.$router.push({name:"movie-list"})}},computed:{randomRes:function(){var t=this.movies,e=Math.floor(Math.random()*t.length+1)-1;return e>194?t.slice(194,200):t.slice(e,e+6)}},watch:{$route:function(t,e){this.$router.go(0)}}},_={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-container",[s("el-header",[t._v(t._s(this.detail.title))]),t._v(" "),s("el-main",[s("div",{staticClass:"container"},[s("img",{staticClass:"poster",attrs:{src:t.poster,alt:t.title},on:{error:function(e){return t.imgError()}}}),t._v(" "),s("div",{staticStyle:{flex:"1"}},[s("div",{staticClass:"casts"},[s("div",[t._v("\n                            导演: "),t._l(t.directors,function(e,a){return s("span",{key:a+100,staticClass:"director"},[t._v(t._s(e.name))])})],2),t._v(" "),s("div",[t._v("\n                            编剧: "),t._l(t.writers,function(e,a){return s("span",{key:a+1e3,staticClass:"cast-name"},[t._v(t._s(e.name))])})],2),t._v(" "),s("div",[t._v("\n                            演员: "),t._l(t.casts,function(e,a){return s("span",{key:a+1e3,staticClass:"cast-name"},[t._v(t._s(e.name))])})],2)]),t._v(" "),s("div",{staticClass:"check"},[t._v("\n                        上映日期: "),t._l(t.pubdate,function(e,a){return s("span",{key:a,staticClass:"date"},[t._v(t._s(e))])}),t._v(" "),s("div",{staticClass:"duration"},[t._v("片长: "+t._s(t.duration)+"min")]),t._v("\n                        类型: "),t._l(t.genres,function(e,a){return s("span",{key:a+10,staticClass:"genre"},[t._v(t._s(e))])}),t._v(" "),s("div",[t._v("制片国家/地区: "),t._l(t.countries,function(e,a){return s("span",{key:a+110,staticClass:"genre"},[t._v(t._s(e))])})],2),t._v(" "),s("div",[t._v("语言: "),t._l(t.languages,function(e,a){return s("span",{key:a+120,staticClass:"genre"},[t._v(t._s(e))])})],2)],2)]),t._v(" "),s("div",[s("div",[s("span",{staticClass:"rating"},[s("el-rate",{attrs:{disabled:"","show-score":"","text-color":"#ff9900",colors:["#99A9BF","#F7BA2A","#FF9900"],"score-template":"{value}"},model:{value:t.rate,callback:function(e){t.rate=e},expression:"rate"}})],1),t._v(" "),s("span",{staticClass:"rating-people"},[t._v("("+t._s(this.rating.rating_people)+"人评分)")])]),t._v(" "),s("div",[s("span",{staticClass:"rating"},[s("el-rate",{attrs:{disabled:"","show-text":"",colors:["#99A9BF","#F7BA2A","#FF9900"],"text-color":"#ff9900","score-template":"{value}"},model:{value:t.value5,callback:function(e){t.value5=e},expression:"value5"}})],1),t._v(" "),s("span",{staticClass:"rating-people"},[t._v(t._s(this.rating.stars[0])+"%")])]),t._v(" "),s("div",[s("span",{staticClass:"rating"},[s("el-rate",{attrs:{disabled:"","show-text":"",colors:["#99A9BF","#F7BA2A","#FF9900"],"text-color":"#ff9900","score-template":"{value}"},model:{value:t.value4,callback:function(e){t.value4=e},expression:"value4"}})],1),t._v(" "),s("span",{staticClass:"rating-people"},[t._v(t._s(this.rating.stars[1])+"%")])]),t._v(" "),s("div",[s("span",{staticClass:"rating"},[s("el-rate",{attrs:{disabled:"","show-text":"",colors:["#99A9BF","#F7BA2A","#FF9900"],"text-color":"#F7BA2A","score-template":"{value}"},model:{value:t.value3,callback:function(e){t.value3=e},expression:"value3"}})],1),t._v(" "),s("span",{staticClass:"rating-people"},[t._v(t._s(this.rating.stars[2])+"%")])]),t._v(" "),s("div",[s("span",{staticClass:"rating"},[s("el-rate",{attrs:{disabled:"","show-text":"",colors:["#99A9BF","#F7BA2A","#FF9900"],"text-color":"#99A9BF","score-template":"{value}"},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}})],1),t._v(" "),s("span",{staticClass:"rating-people"},[t._v(t._s(this.rating.stars[3])+"%")])]),t._v(" "),s("div",[s("span",{staticClass:"rating"},[s("el-rate",{attrs:{disabled:"","show-text":"",colors:["#99A9BF","#F7BA2A","#FF9900"],"text-color":"#99A9BF","score-template":"{value}"},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}})],1),t._v(" "),s("span",{staticClass:"rating-people"},[t._v(t._s(this.rating.stars[4])+"%")])])])]),t._v(" "),s("div",{staticClass:"intro"},[s("div",{staticClass:"intro-word"},[t._v("简介")]),s("br"),t._v(" "),s("div",[t._v(t._s(t.summary))])]),t._v(" "),s("div",{staticClass:"other-movie"},[s("div",{staticClass:"command-word"},[s("span",[t._v("推荐")]),t._v(" "),s("span",{staticClass:"back",on:{click:t.goToList}},[t._v("返回列表>>")])]),t._v(" "),t._l(t.randomRes,function(e,a){return s("el-col",{key:a+350,attrs:{span:4}},[s("img",{staticClass:"poster-list",attrs:{src:e.poster,alt:e.title},on:{error:function(s){return t.imgListError(e)},click:function(s){return t.goToDetail(e)}}}),t._v(" "),s("div",{staticClass:"title-list"},[t._v(t._s(e.title))])])})],2)])],1)],1)},staticRenderFns:[]};var g=s("VU/8")(p,_,!1,function(t){s("t2OE")},"data-v-63a3d7a6",null).exports,f={name:"MovieCard",props:["detail"],data:function(){return{id:"",casts:[],countries:[],directors:[],duration:"",genres:[],languages:[],poster:"",pubdate:[],rating:{average:3,rating_people:0,stars:[]},summary:"",title:"",writers:[],rate:0}},mounted:function(){this.init()},methods:{init:function(){this.id=this.detail._id,this.casts=this.detail.casts,this.countries=this.detail.countries,this.directors=this.detail.directors,this.duration=this.detail.duration,this.genres=this.detail.genres,this.languages=this.detail.languages,this.poster=this.detail.poster,this.pubdate=this.detail.pubdate,this.rating=this.detail.rating,this.summary=this.detail.summary,this.title=this.detail.title,this.writers=this.detail.writers,this.rate=parseFloat((parseFloat(this.detail.rating.average)/2).toFixed(1)),""===this.detail.rating.average&&(this.rate="暂无评分",this.rating.rating_people=0)},imgError:function(){this.poster=s("Xik7")},goToDetail:function(){this.$router.push({name:"movie-detail",params:{id:this.id}})}},watch:{detail:{handler:function(t,e){this.init()},deep:!0}}},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-card",{attrs:{"body-style":{display:"flex",flexDirection:"column",padding:0}}},[s("div",{staticClass:"container"},[s("img",{staticClass:"poster",attrs:{src:t.poster,alt:t.title},on:{error:function(e){return t.imgError()},click:t.goToDetail}}),t._v(" "),s("div",{staticStyle:{flex:"1"}},[s("div",{staticClass:"title",on:{click:t.goToDetail}},[t._v(t._s(t.title))]),t._v(" "),s("div",{staticClass:"check"},[t._l(t.pubdate,function(e,a){return s("span",{key:a,staticClass:"date"},[t._v(t._s(e))])}),t._v(" "),s("span",{staticClass:"duration"},[t._v(t._s(t.duration)+"min")]),t._v(" "),t._l(t.genres,function(e,a){return s("span",{key:a+10,staticClass:"genre"},[t._v(t._s(e))])}),t._v(" "),s("el-row",[s("span",{staticClass:"rating"},[s("el-rate",{attrs:{disabled:"","show-score":"","text-color":"#ff9900","score-template":"{value}"},model:{value:t.rate,callback:function(e){t.rate=e},expression:"rate"}})],1),t._v(" "),s("span",{staticClass:"rating-people"},[t._v("("+t._s(this.rating.rating_people)+"人评分)")])])],2),t._v(" "),s("div",{staticClass:"casts"},[t._l(t.directors,function(e,a){return s("span",{key:a+100,staticClass:"director"},[t._v(t._s(e.name))])}),t._v(" "),t._l(t.casts,function(e,a){return s("span",{key:a+1e3,staticClass:"cast-name"},[t._v(t._s(e.name))])})],2),t._v(" "),s("div",{staticClass:"intro"},[t._v("\n        "+t._s(t.summary)+"\n      ")])])])])},staticRenderFns:[]};var C=s("VU/8")(f,m,!1,function(t){s("yacZ")},"data-v-3b82ef68",null).exports,b=s("lHA8"),k=s.n(b),w={name:"Boarding",props:["movieList"],data:function(){return{genre:"恐怖"}},methods:{selectMovie:function(t){this.$emit("titleSearchChanged",t.title)}},computed:{genres:function(){var t=new k.a;this.movieList.forEach(function(e){e.genres.forEach(function(e){t.add(e)})});var e=[];return t.forEach(function(t){e.push({value:t,label:t})}),e},boardingRes:function(){var t=this,e=this.movieList.filter(function(e){return v()(e.genres).join("____").toLowerCase().search(t.genre.toLowerCase())>=0});return(e=e.sort(F)).slice(0,10)},totalRes:function(){var t=this.movieList.filter(function(t){return v()(t.genres).join("____").toLowerCase().search()>=0});return(t=t.sort(F)).slice(0,10)}}};function F(t,e){return e.rating.average-t.rating.average}var x={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"board"},[s("el-col",{staticClass:"sub-header",attrs:{span:14}},[t._v("排行榜")]),t._v(" "),s("el-col",{staticClass:"genre",attrs:{span:10}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.genre,callback:function(e){t.genre=e},expression:"genre"}},t._l(t.genres,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),s("div",{staticClass:"boarding-list"},t._l(t.boardingRes,function(e,a){return s("p",{key:a,on:{click:function(s){return t.selectMovie(e)}}},[t._v(t._s(e.title))])}),0),t._v(" "),s("el-col",{staticClass:"sub-header"},[t._v("口碑榜")]),t._v(" "),s("div",{staticClass:"boarding-list"},t._l(t.totalRes,function(e,a){return s("p",{key:a,on:{click:function(s){return t.selectMovie(e)}}},[t._v(t._s(e.title))])}),0)],1)},staticRenderFns:[]};var y={name:"MovieList",components:{MovieCard:C,Boarding:s("VU/8")(w,x,!1,function(t){s("P5SI")},"data-v-352fd2b8",null).exports},data:function(){return{movies:[],currentPage:1,pageSize:10,totalMovie:0,search:"",command:"全文检索",options:[{value:"按名称",label:"按名称"},{value:"按导演",label:"按导演"},{value:"按演员",label:"按演员"},{value:"全文检索",label:"全文检索"}],genre:""}},mounted:function(){this.getJsonInfo()},methods:{getJsonInfo:function(){this.$http.options.emulateJSON=!0,this.$http.get("./static/films.json").then(function(t){this.movies=t.data,this.totalMovie=this.movies.length}).catch(function(t){console.log(t)})},handleCurrentChange:function(t){this.currentPage=t},handleSearch:function(t){var e=this;return this.currentPage=1,"a"===t?this.movies.filter(function(t){return v()(t.title).join("____").toLowerCase().search(e.search.toLowerCase())>=0}).slice((val-1)*this.pageSize,val*this.pageSize):"b"===t?this.movies.filter(function(t){return v()(t.directors).join("____").toLowerCase().search(e.search.toLowerCase())>=0}).slice((val-1)*this.pageSize,val*this.pageSize):void 0},searchTitle:function(t){this.command="按名称",this.search=t}},computed:{res:function(){var t=this;this.search&&(this.currentPage=1);var e=this.currentPage,s=this.movies.filter(function(e){return v()(e).join("____").toLowerCase().search(t.search.toLowerCase())>=0}),a=this.command;if("按名称"===a)return i=(s=this.movies.filter(function(e){return v()(e.title).join("").toLowerCase().search(t.search.toLowerCase())>=0})).slice((e-1)*this.pageSize,e*this.pageSize);if("按导演"===a)return i=(s=this.movies.filter(function(e){var s=[];return e.directors.forEach(function(t){s.push(t.name)}),v()(s).join("____").toLowerCase().search(t.search.toLowerCase())>=0})).slice((e-1)*this.pageSize,e*this.pageSize);if("按演员"===a)return i=(s=this.movies.filter(function(e){var s=[];return e.casts.forEach(function(t){s.push(t.name)}),v()(s).join("____").toLowerCase().search(t.search.toLowerCase())>=0})).slice((e-1)*this.pageSize,e*this.pageSize);var i=s.slice((e-1)*this.pageSize,e*this.pageSize);return console.log(i),i}}},L={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-container",[s("el-header",[s("el-col",{attrs:{span:6}},[s("el-input",{attrs:{placeholder:"请输入需要检索的内容"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),s("el-col",{attrs:{span:2}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.command,callback:function(e){t.command=e},expression:"command"}},t._l(t.options,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),s("el-col",{staticClass:"header-text",attrs:{span:10}},[t._v("My Movie List")]),t._v(" "),s("el-col",{attrs:{span:6}},[s("div",{staticClass:"block"},[s("el-pagination",{attrs:{layout:"prev, pager, next","current-page":t.currentPage,"page-size":t.pageSize,total:t.totalMovie},on:{"current-change":t.handleCurrentChange}})],1)])],1),t._v(" "),s("el-container",[s("el-aside",[s("div",{staticClass:"boarding"},[s("Boarding",{attrs:{movieList:t.movies},on:{titleSearchChanged:function(e){return t.searchTitle(e)}}})],1)]),t._v(" "),s("el-main",t._l(t.res,function(t,e){return s("el-row",{key:e},[s("el-col",{attrs:{span:24}},[s("MovieCard",{attrs:{detail:t}})],1)],1)}),1)],1)],1)],1)},staticRenderFns:[]};var A=[{path:"/movie-list",name:"movie-list",component:s("VU/8")(y,L,!1,function(t){s("+LN4")},null,null).exports},{path:"/movie-detail/:id",name:"movie-detail",component:g},{path:"/",redirect:"movie-list"}];a.default.use(n.a),a.default.use(l.a),a.default.use(c.a);var S=new c.a({routes:A});new a.default({el:"#app",router:S,render:function(t){return t(r)}})},P5SI:function(t,e){},Xik7:function(t,e,s){t.exports=s.p+"static/img/LostSource.41c5a11.png"},t2OE:function(t,e){},tvR6:function(t,e){},yacZ:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.be5fffc8ee4c4e8b88f2.js.map